<%- model_class = Store -%>
<div class="page-header">
  <h1><%= t '.title', :default => model_class.model_name.human.titleize %></h1>
</div>
<center><%= image_tag @store.avatar.url, size: "200x200" %></center><br>
<dl class="dl-horizontal">
  <dt><strong><%= model_class.human_attribute_name(:name) %>:</strong></dt>
  <dd><%= @store.name %></dd>
  <dt><strong><%= model_class.human_attribute_name(:contact) %>:</strong></dt>
  <dd><%= @store.contact %></dd>
  <dt><strong><%= model_class.human_attribute_name(:location) %>:</strong></dt>
  <dd><%= @store.location %></dd>
  <dt><strong><%= model_class.human_attribute_name(:category) %>:</strong></dt>
  <dd><%= @store.category %></dd>
  <dt><strong><%= model_class.human_attribute_name(:store_hours) %>:</strong></dt>
  <dd><%= @store.store_hours %></dd>
  <dt><strong><%= model_class.human_attribute_name(:average_sales) %>:</strong></dt>
  <dd><%= @store.average_sales ? @store.average_sales : 0.0 %></dd>
  <dt><strong><%= model_class.human_attribute_name(:description) %>:</strong></dt>
  <dd><%= @store.description %></dd>
  <dt><strong><%= model_class.human_attribute_name(:website) %>:</strong></dt>
  <dd><%= @store.website %></dd>
  <dt><strong><%= model_class.human_attribute_name(:facebook_page) %>:</strong></dt>
  <dd><%= @store.facebook_page %></dd>
  <dt><strong><%= model_class.human_attribute_name(:twitter_page) %>:</strong></dt>
  <dd><%= @store.twitter_page %></dd>
</dl>

<!-- Start Recent Products Carousel -->
<br><br><br><br>
<% if !@store.get_store_products.empty? %>
    <%- model_class = Product -%>
    <div class="page-header">
      <h1><%= t '.title', :default => model_class.model_name.human.titleize + "s" %></h1>
    </div>

    <table class="table table-striped">
      <thead>
      <tr>
        <th><%= model_class.human_attribute_name(:avatar) %></th>
        <th><%= model_class.human_attribute_name(:name) %></th>
        <th><%= model_class.human_attribute_name(:product_type) %></th>
        <th><%= model_class.human_attribute_name(:brand) %></th>
        <th><%= model_class.human_attribute_name(:manufacturer) %></th>
        <th><%= model_class.human_attribute_name(:price) %></th>
        <th><%= model_class.human_attribute_name(:stock) %></th>
        <th><%= model_class.human_attribute_name(:description) %></th>
        <th><%= t '.actions', :default => t("helpers.actions") %></th>
      </tr>
      </thead>
      <tbody>
      <% @store.get_store_products.each do |product| %>
          <tr>
            <td><%= image_tag product.avatar, size: "50x50" %></td>
            <td><%= link_to product.get_name, store_product_path(product) %></td>
            <td><%= product.get_type %></td>
            <td><%= product.get_brand %></td>
            <td><%= product.get_manufacturer %></td>
            <td><%= product.price %></td>
            <td><%= product.stock %></td>
            <td><%= product.description %></td>
            <td>
              <%= link_to t('.edit', :default => t("helpers.links.edit")),
                          edit_product_path(product), :class => 'btn btn-default btn-xs' %>
              <%= link_to t('.destroy', :default => t("helpers.links.destroy")),
                          product_path(product),
                          :method => :delete,
                          :data => {:confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?'))},
                          :class => 'btn btn-xs btn-danger' %>
            </td>
          </tr>
      <% end %>
      </tbody>
    </table>

<% end %>

<%= link_to 'Add Product', new_store_product_path(:store_id => @store.id), :class => 'btn btn-default' %>
<%= link_to t('.back', :default => t("helpers.links.back")),
            owned_stores_user_path(current_user), :class => 'btn btn-default' %>
<%= link_to t('.edit', :default => t("helpers.links.edit")),
            edit_store_path(@store), :class => 'btn btn-default' %>
<%= link_to t('.destroy', :default => t("helpers.links.destroy")),
            store_path(@store),
            :method => 'delete',
            :data => {:confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?'))},
            :class => 'btn btn-danger' %>
